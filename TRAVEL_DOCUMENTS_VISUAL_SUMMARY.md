# ğŸ—ºï¸ Sistema de Documentos de Viaje - Resumen Visual Completo

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    GOVELING - TRAVEL DOCUMENTS SYSTEM                      â•‘
â•‘                          Estado: FASE 6 COMPLETA                           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ğŸ” AUTENTICACIÃ“N (FASE 3 + 5 + 6)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Usuario intenta acceder a documentos
           â”‚
           â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ PinVerificationâ”‚
   â”‚    Modal      â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
    â”‚             â”‚
    â–¼             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Face ID â”‚   â”‚ Ingresar â”‚
â”‚Touch IDâ”‚   â”‚   PIN    â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
    â”‚             â”‚
    â–¼             â–¼
  âœ… OK?      âœ… Correcto?
    â”‚             â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
      ğŸ‰ ACCESO
           â”‚
           â”‚ âŒ Si olvida PIN
           â”‚
           â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Forgot PIN   â”‚ â—„â”€â”€ "Â¿Olvidaste tu PIN?"
   â”‚    Modal      â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
   Solicita cÃ³digo
           â”‚
           â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Edge Functionâ”‚
   â”‚ send-recovery â”‚
   â”‚    -email     â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
   ğŸ“§ Email con cÃ³digo
   (6 dÃ­gitos)
           â”‚
           â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Recovery Code â”‚
   â”‚    Modal      â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
    Ingresa cÃ³digo
           â”‚
           â–¼
    âœ… CÃ³digo vÃ¡lido?
           â”‚
           â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Set New PIN  â”‚
   â”‚    Modal      â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
    Nuevo PIN â†’ SecureStore
           â”‚
           â–¼
      ğŸ‰ ACCESO


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ğŸ“„ GESTIÃ“N DE DOCUMENTOS (FASE 4)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Usuario accede con PIN/BiometrÃ­a
           â”‚
           â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚Travel Documentsâ”‚
   â”‚    Modal      â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
    â”‚             â”‚
    â–¼             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Lista  â”‚   â”‚ Agregar  â”‚
â”‚Docs    â”‚   â”‚  Nuevo   â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
    â”‚             â”‚
    â”‚             â–¼
    â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚     â”‚ Add Document  â”‚
    â”‚     â”‚    Modal      â”‚
    â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚             â”‚
    â”‚      Selector tipo
    â”‚      Date pickers
    â”‚      Image picker
    â”‚      Formulario
    â”‚             â”‚
    â”‚             â–¼
    â”‚      Verificar PIN
    â”‚             â”‚
    â”‚             â–¼
    â”‚      Guardar en:
    â”‚      â€¢ Supabase Storage
    â”‚      â€¢ BD (metadata)
    â”‚      â€¢ Encriptado (temp)
    â”‚             â”‚
    â”‚             â””â”€â”€â”€â”€â”€â”€â”
    â”‚                    â”‚
    â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ver Documento              â”‚
â”‚                            â”‚
â”‚ â€¢ Imagen â†’ zoom nativo     â”‚
â”‚ â€¢ PDF â†’ WebView zoom       â”‚
â”‚ â€¢ Detalles                 â”‚
â”‚ â€¢ Eliminar                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ğŸ—„ï¸ ARQUITECTURA DE DATOS (FASE 1)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SUPABASE DATABASE                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  ğŸ“‹ travel_documents                                                    â”‚
â”‚  â”œâ”€ id (UUID)                                                          â”‚
â”‚  â”œâ”€ user_id (UUID) â”€â”€â”€â”€â”€â”€â”€â–º auth.users(id)                           â”‚
â”‚  â”œâ”€ document_type (TEXT)    [passport, visa, id_card, ...]           â”‚
â”‚  â”œâ”€ expiry_date (TIMESTAMPTZ)                                         â”‚
â”‚  â”œâ”€ status (TEXT)           [valid, warning, critical, expired]       â”‚
â”‚  â”œâ”€ has_image (BOOLEAN)                                               â”‚
â”‚  â”œâ”€ encrypted_data_primary (TEXT) â† PIN encryption                    â”‚
â”‚  â”œâ”€ primary_iv (TEXT)                                                 â”‚
â”‚  â”œâ”€ primary_auth_tag (TEXT)                                           â”‚
â”‚  â”œâ”€ encrypted_data_recovery (TEXT) â† Recovery encryption              â”‚
â”‚  â”œâ”€ recovery_iv (TEXT)                                                â”‚
â”‚  â”œâ”€ recovery_auth_tag (TEXT)                                          â”‚
â”‚  â”œâ”€ created_at, updated_at, synced_at                                 â”‚
â”‚  â”‚                                                                     â”‚
â”‚  â””â”€ RLS Policies:                                                     â”‚
â”‚     â”œâ”€ SELECT: auth.uid() = user_id                                   â”‚
â”‚     â”œâ”€ INSERT: auth.uid() = user_id                                   â”‚
â”‚     â”œâ”€ UPDATE: auth.uid() = user_id                                   â”‚
â”‚     â””â”€ DELETE: auth.uid() = user_id                                   â”‚
â”‚                                                                         â”‚
â”‚  ğŸ” recovery_codes                                                     â”‚
â”‚  â”œâ”€ id (UUID)                                                          â”‚
â”‚  â”œâ”€ user_id (UUID) â”€â”€â”€â”€â”€â”€â”€â–º auth.users(id)                           â”‚
â”‚  â”œâ”€ code_hash (TEXT)        [SHA-256 hash]                           â”‚
â”‚  â”œâ”€ is_used (BOOLEAN)       [false = active]                         â”‚
â”‚  â”œâ”€ attempts (INTEGER)      [0-3]                                    â”‚
â”‚  â”œâ”€ max_attempts (INTEGER)  [3]                                      â”‚
â”‚  â”œâ”€ expires_at (TIMESTAMPTZ) [NOW() + 15 minutes]                   â”‚
â”‚  â”œâ”€ sent_to_email (TEXT)                                             â”‚
â”‚  â”œâ”€ created_at, used_at                                              â”‚
â”‚  â”‚                                                                     â”‚
â”‚  â””â”€ RLS Policies:                                                     â”‚
â”‚     â”œâ”€ SELECT: auth.uid() = user_id                                   â”‚
â”‚     â”œâ”€ INSERT: auth.uid() = user_id                                   â”‚
â”‚     â””â”€ UPDATE: auth.uid() = user_id                                   â”‚
â”‚                                                                         â”‚
â”‚  ğŸ“Š document_access_logs                                               â”‚
â”‚  â”œâ”€ id (UUID)                                                          â”‚
â”‚  â”œâ”€ document_id (UUID) â”€â”€â”€â–º travel_documents(id)                     â”‚
â”‚  â”œâ”€ user_id (UUID) â”€â”€â”€â”€â”€â”€â”€â”€â–º auth.users(id)                          â”‚
â”‚  â”œâ”€ access_type (TEXT)      [primary_key, recovery_key, view, edit]  â”‚
â”‚  â”œâ”€ accessed_at (TIMESTAMPTZ)                                         â”‚
â”‚  â”œâ”€ ip_address, user_agent                                            â”‚
â”‚  â”‚                                                                     â”‚
â”‚  â””â”€ RLS Policies:                                                     â”‚
â”‚     â”œâ”€ SELECT: auth.uid() = user_id                                   â”‚
â”‚     â””â”€ INSERT: service_role (Edge Functions)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SUPABASE STORAGE                                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  ğŸ“¦ travel-documents (PRIVATE BUCKET)                                  â”‚
â”‚  â”‚                                                                      â”‚
â”‚  â”œâ”€ {user_id}/                                                         â”‚
â”‚  â”‚   â”œâ”€ {timestamp}.jpg    â† ImÃ¡genes                                â”‚
â”‚  â”‚   â”œâ”€ {timestamp}.pdf    â† PDFs                                    â”‚
â”‚  â”‚   â””â”€ ...                                                           â”‚
â”‚  â”‚                                                                      â”‚
â”‚  â””â”€ RLS Policies:                                                      â”‚
â”‚     â”œâ”€ INSERT: auth.uid() = user_id                                    â”‚
â”‚     â”œâ”€ SELECT: auth.uid() = user_id                                    â”‚
â”‚     â”œâ”€ UPDATE: auth.uid() = user_id                                    â”‚
â”‚     â””â”€ DELETE: auth.uid() = user_id                                    â”‚
â”‚                                                                         â”‚
â”‚  ğŸ“ Signed URLs:                                                        â”‚
â”‚     â””â”€ ExpiraciÃ³n: 1 hora                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  EDGE FUNCTIONS                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  ğŸ”’ encrypt-document (Pendiente - Fase futura)                         â”‚
â”‚  â”œâ”€ Input: documentData + primaryKey + recoveryKey                     â”‚
â”‚  â”œâ”€ Process: AES-256-GCM encryption                                    â”‚
â”‚  â””â”€ Output: encrypted blobs + IVs + auth tags                         â”‚
â”‚                                                                         â”‚
â”‚  ğŸ”“ decrypt-document (Pendiente - Fase futura)                         â”‚
â”‚  â”œâ”€ Input: encryptedData + key (PIN or recovery)                      â”‚
â”‚  â”œâ”€ Process: AES-256-GCM decryption                                   â”‚
â”‚  â””â”€ Output: plain documentData                                        â”‚
â”‚                                                                         â”‚
â”‚  ğŸ“§ send-recovery-email âœ…                                              â”‚
â”‚  â”œâ”€ Input: email + code + userId                                       â”‚
â”‚  â”œâ”€ Process: HTML email template + Resend API                         â”‚
â”‚  â””â”€ Output: emailId                                                    â”‚
â”‚                                                                         â”‚
â”‚  ğŸ“ Modo Desarrollo:                                                    â”‚
â”‚  â””â”€ Sin RESEND_API_KEY â†’ cÃ³digo en logs                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ğŸ” CAPAS DE SEGURIDAD IMPLEMENTADAS                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

NIVEL 1: DISPOSITIVO
  â”œâ”€ SecureStore (iOS Keychain / Android Keystore)
  â”‚  â””â”€ PIN hash + salt
  â”‚
  â””â”€ BiometrÃ­a (Face ID / Touch ID / Fingerprint)
     â””â”€ Hardware-backed authentication

NIVEL 2: APLICACIÃ“N
  â”œâ”€ PIN derivation: PBKDF2-SHA256 (100 iterations)
  â”œâ”€ Salt Ãºnico por usuario
  â”œâ”€ MÃ¡ximo 3 intentos de verificaciÃ³n
  â”‚
  â””â”€ Recovery system:
     â”œâ”€ CÃ³digo 6 dÃ­gitos hasheado (SHA-256)
     â”œâ”€ ExpiraciÃ³n 15 minutos
     â””â”€ MÃ¡ximo 3 intentos

NIVEL 3: TRANSPORTE
  â”œâ”€ HTTPS/TLS para todas las comunicaciones
  â””â”€ Signed URLs (Supabase Storage)

NIVEL 4: SERVIDOR
  â”œâ”€ Row Level Security (RLS)
  â”‚  â””â”€ auth.uid() = user_id
  â”‚
  â”œâ”€ EncriptaciÃ³n (Futura)
  â”‚  â”œâ”€ Primary key (PIN-derived)
  â”‚  â””â”€ Recovery key (userID-derived)
  â”‚
  â””â”€ Access Logs
     â””â”€ AuditorÃ­a completa


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ğŸ“± COMPONENTES DE UI                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

MODALES PRINCIPALES:
â”œâ”€ TravelDocumentsModal        [Lista + Empty State]
â”œâ”€ AddDocumentModal            [Formulario 7 tipos]
â”œâ”€ DocumentViewerModal         [Vista + Zoom]
â”‚
â”œâ”€ PinSetupModal               [ConfiguraciÃ³n inicial]
â”œâ”€ PinVerificationModal        [AutenticaciÃ³n]
â”œâ”€ SecuritySettingsModal       [Config biometrÃ­a]
â”‚
â”œâ”€ ForgotPinModal             [Solicitar recuperaciÃ³n] âœ…
â”œâ”€ RecoveryCodeModal          [Ingresar cÃ³digo 6d] âœ…
â””â”€ SetNewPinModal             [Nuevo PIN 2 pasos] âœ…

SERVICIOS:
â”œâ”€ documentEncryption.ts       [PIN management]
â”œâ”€ biometricAuth.ts           [Face ID / Touch ID]
â””â”€ pinRecovery.ts             [Recovery flow] âœ…

TIPOS:
â””â”€ travelDocuments.ts          [12 interfaces, 3 enums]


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       ğŸ¯ ESTADO ACTUAL DEL PROYECTO                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âœ… Fase 1: Database & Backend          [100%]
âœ… Fase 2: Frontend Foundation          [100%]
âœ… Fase 3: Sistema de PIN              [100%]
âœ… Fase 4.1: Formulario                [100%]
âœ… Fase 4.2: Guardado & Storage        [100%]
âœ… Fase 4.3: VisualizaciÃ³n             [100%]
âœ… Fase 5: BiometrÃ­a                   [100%]
âœ… Fase 6: RecuperaciÃ³n Email          [100%] â—„â”€â”€â”€ ACTUAL

ğŸ”œ Fase 7: CachÃ© Offline               [  0%]
ğŸ”œ Fase 8: Optimizaciones              [  0%]


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ğŸ“Š ESTADÃSTICAS GENERALES                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Archivos TypeScript:      15+
LÃ­neas de cÃ³digo:         ~5,000
Componentes UI:           9 modales
Servicios:                3
Edge Functions:           3 (1 activa)
Tablas DB:                3
Storage Buckets:          1
RLS Policies:             12+
Tipos TypeScript:         12 interfaces
Fases completadas:        6 de 8


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            ğŸš€ PRÃ“XIMOS PASOS                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

INMEDIATO:
1. âœ… Desplegar Edge Function send-recovery-email
2. âœ… Configurar RESEND_API_KEY (opcional)
3. âœ… Probar flujo completo de recuperaciÃ³n
4. âœ… Validar recepciÃ³n de emails

FASE 7 - CachÃ© Offline:
â”œâ”€ AsyncStorage para documentos
â”œâ”€ Queue de sincronizaciÃ³n
â”œâ”€ Indicadores online/offline
â””â”€ Sync automÃ¡tico

FASE 8 - Optimizaciones:
â”œâ”€ CompresiÃ³n de imÃ¡genes mejorada
â”œâ”€ Lazy loading de documentos
â”œâ”€ PaginaciÃ³n
â””â”€ Performance monitoring

FUTURO:
â”œâ”€ EncriptaciÃ³n real (Edge Functions)
â”œâ”€ Re-encriptaciÃ³n masiva
â”œâ”€ MigraciÃ³n a react-native-pdf
â”œâ”€ Compartir documentos
â””â”€ Exportar backup


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              ğŸ‰ RESUMEN                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Sistema completo de gestiÃ³n de documentos de viaje con:

âœ… AutenticaciÃ³n multi-capa (PIN + BiometrÃ­a + RecuperaciÃ³n)
âœ… Almacenamiento seguro (RLS + Signed URLs)
âœ… UI/UX profesional (9 modales interactivos)
âœ… Flujo de recuperaciÃ³n completo (Email + CÃ³digo + Nuevo PIN)
âœ… Preparado para encriptaciÃ³n E2EE (infraestructura lista)

Estado: PRODUCCIÃ“N READY (6 de 8 fases completas)
```

---

**Ãšltima actualizaciÃ³n**: 9 de noviembre de 2025  
**Proyecto**: Goveling Travel Documents  
**Estado**: Fase 6 Completada âœ…
